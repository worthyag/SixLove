{% extends './base.html' %} 
{% load static %} 
{% block scripts %}
<script src="{% static './community/scripts/toggle-posts.js' %}" defer></script>
<script src="{% static './community/scripts/view-post.js' %}" defer></script>
<script src="{% static './community/scripts/create-profile.js' %}" defer></script>
{% endblock %}
{% block content %}
{% if user_profile %}
<main id="profile">
  <div class="profile-top">
    <div class="profile-header">
      <div class="profile-photo">
        <img
          {% comment %}src="{{ user_profile.profile_picture.url }}"{% endcomment %}
          src="{% static './community/images/profile-pic-temp.png' %}"
          alt="Profile Photo"
        />
      </div>
      <div class="profile-username-action-btns">
        <p class="profile-username">\{\{ user_profile.username \}\}</p>
        <div class="profile-action-btns">
          <button class="follow">Follow</button>
          <button class="message">Message</button>
        </div>
      </div>
    </div>
    <div class="info">
      <div class="profile-name">\{\{ user_profile.profile_name \}\}</div>
      <div class="profile-bio">
      \{\{ user_profile.bio \}\}
      </div>
    </div>

    <div class="followers-following">
      <div class="followers">
        <div class="follower-text ff-text">followers</div>
        {% comment %}<div class="follower-count ff-count">{{ user_profile.get_followers_count }}</div>{% endcomment %}
        <div class="follower-count ff-count">34</div>
      </div>
      <div class="following">
        <div class="following-text ff-text">following</div>
        {% comment %}<div class="following-count ff-count">{{ user_profile.get_following_count }}</div>{% endcomment %}
        <div class="following-count ff-count">18</div>
      </div>
    </div>
  </div>
  <div class="toggle-container">
    <div class="toggle-feed-view">
      <button class="posts-btn active">
        <img
          src="{% static './community/images/menu.png' %}"
          alt="Post menu icon"
        />
      </button>
      <button class="achievements-btn">
        <img
          src="{% static './community/images/achievements-icon.png' %}"
          alt="Achievements icon"
        />
      </button>
    </div>
  </div>
  <div class="feed">
    {% for post in user_posts %}
    <div class="feed-post">
      <img src="{{ post.post_picture.url }}" alt="user post">
    </div>
    {% endfor %}

    <div class="feed-post">
      <img src="{% static './community/images/test.jpeg' %}" alt="user post">
    </div>
    <div class="feed-post"></div>
    <div class="feed-post"></div>
    <div class="feed-post"></div>
    <div class="feed-post"></div>
    <div class="feed-post"></div>
  </div>

  <div class="achievements toggle-posts">
    <div class="award">
      <div class="award-img"></div>
      <div class="award-info">
        <p class="award-name">Award Name</p>
        <p class="award-desc">Award description goes here...</p>
        <p class="award-date">Awarded DD-MM-YYYY</p>
      </div>
    </div>
    <div class="award">
      <div class="award-img"></div>
      <div class="award-info">
        <p class="award-name">Award Name</p>
        <p class="award-desc">Award description goes here...</p>
        <p class="award-date">Awarded DD-MM-YYYY</p>
      </div>
    </div>
    <div class="award">
      <div class="award-img"></div>
      <div class="award-info">
        <p class="award-name">Award Name</p>
        <p class="award-desc">Award description goes here...</p>
        <p class="award-date">Awarded DD-MM-YYYY</p>
      </div>
    </div>
  </div>

    <!-- Modals for viewing the post -->
    <div id="viewPostModal" class="modal">
      <div class="modal-content">
        <span class="close-btn" onclick="closeModal('#viewPostModal')">&times;</span>
        <div id="modalContent">
          <div class="post">
            <div class="post-img">
              <img src="{% static './community/images/test.jpeg' %}" alt="user post">
            </div>
            <div class="post-btns">
              <button class="post-like-btn"><img src="{% static './community/images/like-icon.svg'%}" alt="like button"></button>
              <button class="post-comment-btn"><img src="{% static './community/images/comments-icon.svg'%}" alt="comment button"></button>
            </div>
            <div class="post-likes"><span class="like-count">124</span> likes</div>
            <div class="post-caption">
              <span class="username">username</span>
              <span class="caption-text">caption text will be placed...</span>
            </div>
            <div class="post-comments">View all 12 comments</div>
            <div class="post-date">2 days ago</div>
              </div>
            </div>
          </div>
    </div>

    <!-- Modal for creating a profile -->
  <div id="createProfileModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('#createProfileModal')">&times;</span>
      <div id="modalContent">s
        <form action="" method="post" novalidate>
          {% csrf_token %} 
          {{ profile_form.as_p }}
          <input class="btn" type="submit" value="Create Post" />
        </form>
      </div>
    </div>
  </div>
</main>
{% else %}
<main>
  <p>You haven't created your user profile yet.</p>
  <button class="create-profile-btn">Create Profile</button>
</main>
{% endif %}
<script>
  function closeModal(id) {
    const closeBtn = document.querySelector(id);
    closeBtn.style.display = "none";
  }
</script>
{% endblock %}
