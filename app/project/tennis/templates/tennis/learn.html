{% extends '../registration/base.html' %}
{% load static %}
{% block extra_styles %}
<link rel="stylesheet" href="{% static './tennis/styles/styles.css' %}">
{% endblock %}
{% block content %}
<main id="learn">
  <h2>Discover</h2>

  <!-- Search Form -->
  <form class="search-form" action="" method="get">
    <input type="text" name="resource-search" placeholder="Search resources" value="{{ search_query }}">
    <button type="submit">Search</button>
  </form>
  
  <div class="resources">
    {% for resource in resources %}
    <a href="{% url 'tennis:resource' resource_id=resource.id %}">
      <div class="resource">
        <p class="resource-title">{{ resource.title }}</p>
        {% if resource.resource_type != "video" %}
          {% with first_section=resource.sections.first %}
            {% if first_section %}
              <p class="resource-content">{{ first_section.content|slice:":120" }}...</p>
            {% endif %}
          {% endwith %}
        {% endif %}
        <p class="resource-tag">{{ resource.tags.first.name }}</p>
      </div>
    </a>
    {% endfor %}
  </div>
</main>
{% endblock %}
